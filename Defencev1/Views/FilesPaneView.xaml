<?xml version="1.0" encoding="utf-8" ?>
<ContentView x:Class="Defencev1.Views.FilesPaneView"
xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
xmlns:local="clr-namespace:Defencev1.ViewModels;assembly=Defencev1"
xmlns:views="clr-namespace:Defencev1.Views"
x:DataType="local:FilesPaneViewModel"
IsVisible="False"
WidthRequest="250">
    <VerticalStackLayout>
        <Grid Padding="5">
            <Label
            Margin="10,0,0,0"
            FontAttributes="Bold"
            HorizontalOptions="Center"
            Text="Files" />
            <ImageButton
            Grid.Column="1"
            Padding="5"
            BackgroundColor="{StaticResource Background2}"
            Clicked="OnHideClicked"
            HorizontalOptions="End"
            Rotation="180"
            Source="arrow.png"
            WidthRequest="28" />
        </Grid>

        <Button
        Margin="10"
        Command="{Binding SelectFilesCommand}"
        Text="Select .mmpk file" />

        <CollectionView
        x:Name="MmpkCollection"
        Margin="10"
        ItemsSource="{Binding LoadedMapPackageFiles}"
        SelectionMode="Single">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="local:MmpkFile">
                    <Grid ColumnDefinitions="*, Auto">
                        <Label Text="{Binding Name}" />
                        <Grid Grid.Column="1" ColumnDefinitions="Auto">
                            <Button
                            Margin="2"
                            Clicked="OnLoadMmpkClicked"
                            Command="{Binding Source={RelativeSource AncestorType={x:Type CollectionView}}, Path=BindingContext.LoadMmpkCommand}"
                            CommandParameter="{Binding FullPath}"
                            IsEnabled="{Binding IsLoadingEnabled}"
                            HorizontalOptions="End"
                            Text="Load"
                            WidthRequest="60" />
                        </Grid>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Label Margin="5" Text="{Binding ResultMsg}" />
    </VerticalStackLayout>
</ContentView>